{"version":3,"sources":["native.tsx"],"sourcesContent":["import React from 'react';\nimport ReactNative from 'react-native';\n\nexport type EventTypes = ReactNative.GestureResponderEvent;\nexport type HandlerType = (event: EventTypes) => void;\n\nexport type EventContextType = {\n  subscribe: (handler: HandlerType) => void;\n};\n\nexport const EventContext = React.createContext<EventContextType | undefined>(\n  undefined,\n);\n\nexport type EventProviderProps = {\n  events?: string[];\n  children?: React.ReactNode;\n};\nexport function EventProvider({ children }: EventProviderProps) {\n  const [handlers] = React.useState<HandlerType[]>([]);\n  function onEvent(event: EventTypes) {\n    handlers.forEach((subscriber) => subscriber(event));\n  }\n  function subscribe(handler: HandlerType) {\n    handlers.push(handler);\n    return () => handlers.splice(handlers.indexOf(handler), 1);\n  }\n\n  return (\n    <EventContext.Provider value={{ subscribe }}>\n      <ReactNative.View\n        style={ReactNative.StyleSheet.absoluteFill}\n        onStartShouldSetResponderCapture={(event:ReactNative.GestureResponderEvent) => {\n          event.persist();\n          onEvent(event);\n          return false;\n        }}\n      >\n        {children}\n      </ReactNative.View>\n    </EventContext.Provider>\n  );\n}\n\nexport function useEvent(handler, dependencies) {\n  const { subscribe } = React.useContext(EventContext);\n  React.useEffect(\n    () => subscribe(handler),\n    [subscribe, handler].concat(dependencies),\n  );\n}\n\nexport default {\n  EventContext,\n  EventProvider,\n  useEvent\n}\n"],"names":["EventProvider","useEvent","EventContext","React","createContext","undefined","children","onEvent","event","handlers","forEach","subscriber","subscribe","handler","push","splice","indexOf","useState","Provider","value","ReactNative","View","style","StyleSheet","absoluteFill","onStartShouldSetResponderCapture","persist","dependencies","useContext","useEffect","concat"],"mappings":"AAAA;;;;QAkBgBA,aAAa,GAAbA,aAAa;QA0BbC,QAAQ,GAARA,QAAQ;;AA5CN,IAAA,MAAO,kCAAP,OAAO,EAAA;AACD,IAAA,YAAc,kCAAd,cAAc,EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAS/B,IAAMC,YAAY,iBAAGC,MAAK,QAAA,CAACC,aAAa,CAC7CC,SAAS,CACV,AAAC;QAFWH,YAAY,GAAZA,YAAY;AAQlB,SAASF,aAAa,CAAC,KAAgC,EAAE;QAAlC,AAAEM,QAAQ,GAAV,KAAgC,CAA9BA,QAAQ,AAAsB;QAEnDC,OAAO,GAAhB,SAASA,OAAO,CAACC,KAAiB,EAAE;QAClCC,QAAQ,CAACC,OAAO,CAAC,SAACC,UAAU;mBAAKA,UAAU,CAACH,KAAK,CAAC;SAAA,CAAC,CAAC;KACrD;QACQI,SAAS,GAAlB,SAASA,SAAS,CAACC,OAAoB,EAAE;QACvCJ,QAAQ,CAACK,IAAI,CAACD,OAAO,CAAC,CAAC;QACvB,OAAO;mBAAMJ,QAAQ,CAACM,MAAM,CAACN,QAAQ,CAACO,OAAO,CAACH,OAAO,CAAC,EAAE,CAAC,CAAC;SAAA,CAAC;KAC5D;IAPD,IAAmBV,GAAiC,kBAAjCA,MAAK,QAAA,CAACc,QAAQ,CAAgB,EAAE,CAAC,IAAA,EAA7CR,QAAQ,GAAIN,GAAiC,GAArC,AAAsC;IASrD,qBACE,6BAACD,YAAY,CAACgB,QAAQ;QAACC,KAAK,EAAE;YAAEP,SAAS,EAATA,SAAS;SAAE;qBACzC,6BAACQ,YAAW,QAAA,CAACC,IAAI;QACfC,KAAK,EAAEF,YAAW,QAAA,CAACG,UAAU,CAACC,YAAY;QAC1CC,gCAAgC,EAAE,SAACjB,KAAuC,EAAK;YAC7EA,KAAK,CAACkB,OAAO,EAAE,CAAC;YAChBnB,OAAO,CAACC,KAAK,CAAC,CAAC;YACf,OAAO,KAAK,CAAC;SACd;OAEAF,QAAQ,CACQ,CACG,CACxB;CACH;AAEM,SAASL,QAAQ,CAACY,OAAO,EAAEc,YAAY,EAAE;IAC9C,IAAM,AAAEf,SAAS,GAAKT,MAAK,QAAA,CAACyB,UAAU,CAAC1B,YAAY,CAAC,CAA5CU,SAAS,AAAmC,AAAC;IACrDT,MAAK,QAAA,CAAC0B,SAAS,CACb;eAAMjB,SAAS,CAACC,OAAO,CAAC;KAAA,EACxB;QAACD,SAAS;QAAEC,OAAO;KAAC,CAACiB,MAAM,CAACH,YAAY,CAAC,CAC1C,CAAC;CACH;eAEc;IACbzB,YAAY,EAAZA,YAAY;IACZF,aAAa,EAAbA,aAAa;IACbC,QAAQ,EAARA,QAAQ;CACT"}
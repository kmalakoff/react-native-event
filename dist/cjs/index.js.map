{"version":3,"sources":["index.tsx"],"sourcesContent":["import { useState, useEffect, useContext, createContext, createElement } from 'react';\nimport type { ReactNode } from 'react';\nimport { View, StyleSheet } from 'react-native';\nimport type { GestureResponderEvent } from 'react-native';\n\nexport type EventTypes = GestureResponderEvent;\nexport type HandlerType = (event: EventTypes) => void;\n\nexport type EventContextType = {\n  subscribe: (handler: HandlerType) => void;\n};\n\nexport const EventContext = createContext<EventContextType | undefined>(undefined);\n\nexport type EventProviderProps = {\n  events?: string[];\n  children?: ReactNode;\n};\nexport function EventProvider({ children }: EventProviderProps) {\n  const state = useState<HandlerType[]>([]);\n  const handlers = state[0];\n\n  function onEvent(event: EventTypes) {\n    handlers.forEach((subscriber) => subscriber(event));\n  }\n  function subscribe(handler: HandlerType) {\n    handlers.push(handler);\n    return () => handlers.splice(handlers.indexOf(handler), 1);\n  }\n\n  //   <EventContext.Provider value={{ subscribe }}>\n  //   <View\n  //     style={StyleSheet.absoluteFill}\n  //     onStartShouldSetResponderCapture={(\n  //       event: GestureResponderEvent,\n  //     ) => {\n  //       event.persist();\n  //       onEvent(event);\n  //       return false;\n  //     }}\n  //   >\n  //     {children}\n  //   </View>\n  // </EventContext.Provider>\n\n  return createElement(\n    EventContext.Provider,\n    { value: { subscribe } },\n    createElement(\n      View,\n      {\n        style: StyleSheet.absoluteFill,\n        onStartShouldSetResponderCapture: (event) => {\n          event.persist();\n          onEvent(event);\n          return false;\n        },\n      },\n      children,\n    ),\n  );\n}\n\nexport function useEvent(handler, dependencies) {\n  const context = useContext(EventContext);\n  if (!context) {\n    throw new Error('react-native-event: subscribe not found on context. You might be missing the EventProvider or have multiple instances of react-native-event');\n  }\n\n  useEffect(() => context.subscribe(handler), [context.subscribe, handler].concat(dependencies));\n}\n"],"names":["EventContext","EventProvider","useEvent","createContext","undefined","children","onEvent","event","handlers","forEach","subscriber","subscribe","handler","push","splice","indexOf","state","useState","createElement","Provider","value","View","style","StyleSheet","absoluteFill","onStartShouldSetResponderCapture","persist","dependencies","context","useContext","Error","useEffect","concat"],"mappings":"AAAA;;;;;;;;;;;IAYaA,YAAY;eAAZA,YAAY;;IAMTC,aAAa;eAAbA,aAAa;;IA6CbC,QAAQ;eAARA,QAAQ;;;qBA/DsD,OAAO;2BAEpD,cAAc;AAUxC,IAAMF,YAAY,iBAAGG,IAAAA,MAAa,cAAA,EAA+BC,SAAS,CAAC,AAAC;AAM5E,SAASH,aAAa,CAAC,KAAgC,EAAE;QAAlC,AAAEI,QAAQ,GAAV,KAAgC,CAA9BA,QAAQ,AAAsB;QAInDC,OAAO,GAAhB,SAASA,OAAO,CAACC,KAAiB,EAAE;QAClCC,QAAQ,CAACC,OAAO,CAAC,SAACC,UAAU;mBAAKA,UAAU,CAACH,KAAK,CAAC;SAAA,CAAC,CAAC;KACrD;QACQI,SAAS,GAAlB,SAASA,SAAS,CAACC,OAAoB,EAAE;QACvCJ,QAAQ,CAACK,IAAI,CAACD,OAAO,CAAC,CAAC;QACvB,OAAO;mBAAMJ,QAAQ,CAACM,MAAM,CAACN,QAAQ,CAACO,OAAO,CAACH,OAAO,CAAC,EAAE,CAAC,CAAC;SAAA,CAAC;KAC5D;IATD,IAAMI,KAAK,GAAGC,IAAAA,MAAQ,SAAA,EAAgB,EAAE,CAAC,AAAC;IAC1C,IAAMT,QAAQ,GAAGQ,KAAK,CAAC,CAAC,CAAC,AAAC;IAU1B,kDAAkD;IAClD,UAAU;IACV,sCAAsC;IACtC,0CAA0C;IAC1C,sCAAsC;IACtC,aAAa;IACb,yBAAyB;IACzB,wBAAwB;IACxB,sBAAsB;IACtB,SAAS;IACT,MAAM;IACN,iBAAiB;IACjB,YAAY;IACZ,2BAA2B;IAE3B,qBAAOE,IAAAA,MAAa,cAAA,EAClBlB,YAAY,CAACmB,QAAQ,EACrB;QAAEC,KAAK,EAAE;YAAET,SAAS,EAATA,SAAS;SAAE;KAAE,gBACxBO,IAAAA,MAAa,cAAA,EACXG,YAAI,KAAA,EACJ;QACEC,KAAK,EAAEC,YAAU,WAAA,CAACC,YAAY;QAC9BC,gCAAgC,EAAE,SAAClB,KAAK,EAAK;YAC3CA,KAAK,CAACmB,OAAO,EAAE,CAAC;YAChBpB,OAAO,CAACC,KAAK,CAAC,CAAC;YACf,OAAO,KAAK,CAAC;SACd;KACF,EACDF,QAAQ,CACT,CACF,CAAC;CACH;AAEM,SAASH,QAAQ,CAACU,OAAO,EAAEe,YAAY,EAAE;IAC9C,IAAMC,OAAO,GAAGC,IAAAA,MAAU,WAAA,EAAC7B,YAAY,CAAC,AAAC;IACzC,IAAI,CAAC4B,OAAO,EAAE;QACZ,MAAM,IAAIE,KAAK,CAAC,6IAA6I,CAAC,CAAC;KAChK;IAEDC,IAAAA,MAAS,UAAA,EAAC;eAAMH,OAAO,CAACjB,SAAS,CAACC,OAAO,CAAC;KAAA,EAAE;QAACgB,OAAO,CAACjB,SAAS;QAAEC,OAAO;KAAC,CAACoB,MAAM,CAACL,YAAY,CAAC,CAAC,CAAC;CAChG"}
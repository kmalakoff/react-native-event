{"version":3,"file":"react-native-event.min.js","sources":["../../src/index.tsx"],"sourcesContent":["import React from 'react';\nimport ReactNative from 'react-native';\n\nexport type EventTypes = ReactNative.GestureResponderEvent;\nexport type HandlerType = (event: EventTypes) => void;\n\nexport type EventContextType = {\n  subscribe: (handler: HandlerType) => void;\n};\n\nexport const EventContext = React.createContext<EventContextType | undefined>(\n  undefined,\n);\n\nexport type EventProviderProps = {\n  events?: string[];\n  children?: React.ReactNode;\n};\nexport function EventProvider({ children }: EventProviderProps) {\n  const [handlers] = React.useState<HandlerType[]>([]);\n  function onEvent(event: EventTypes) {\n    handlers.forEach((subscriber) => subscriber(event));\n  }\n  function subscribe(handler: HandlerType) {\n    handlers.push(handler);\n    return () => handlers.splice(handlers.indexOf(handler), 1);\n  }\n\n  return (\n    <EventContext.Provider value={{ subscribe }}>\n      <ReactNative.View\n        style={ReactNative.StyleSheet.absoluteFill}\n        onStartShouldSetResponderCapture={(\n          event: ReactNative.GestureResponderEvent,\n        ) => {\n          event.persist();\n          onEvent(event);\n          return false;\n        }}\n      >\n        {children}\n      </ReactNative.View>\n    </EventContext.Provider>\n  );\n}\n\nexport function useEvent(handler, dependencies) {\n  const context = React.useContext(EventContext);\n  if (!context.subscribe) throw new Error('react-native-event: subscribe not found on context. You might be missing the EventProvider or have multiple instances of react-native-event')\n\n  React.useEffect(\n    () => context.subscribe(handler),\n    [context.subscribe, handler].concat(dependencies),\n  );\n}\n\nexport default {\n  EventContext,\n  EventProvider,\n  useEvent,\n};\n"],"names":["_arrayLikeToArray","arr","len","EventContext","React","createContext","undefined","EventProvider","param","children","handlers","_slicedToArray","useState","createElement","Provider","value","subscribe","handler","push","splice","indexOf","ReactNative","View","style","StyleSheet","absoluteFill","onStartShouldSetResponderCapture","event","persist","forEach","subscriber","onEvent","useEvent","dependencies","context","useContext","Error","useEffect","concat","index"],"mappings":"4aAAA,SAAAA,EAAAC,EAAAC,+7BAUO,IAAMC,EAAeC,EAAAA,QAAMC,mBAChCC,GAOK,SAASC,EAAcC,GAAA,IAAEC,EAAFD,EAAEC,SACvBC,EAA6CC,EAAjCP,EAAK,QAACQ,SAAwB,IAAG,MASpD,OACER,UAAAS,cAACV,EAAaW,SAAQ,CAACC,MAAO,CAAEC,UANlC,SAAmBC,GAEjB,OADAP,EAASQ,KAAKD,GACP,kBAAMP,EAASS,OAAOT,EAASU,QAAQH,GAAU,OAKtDb,UAACiB,cAAAA,EAAW,QAACC,KAAI,CACfC,MAAOF,EAAAA,QAAYG,WAAWC,aAC9BC,iCAAkC,SAChCC,GAIA,OAFAA,EAAMC,UAfd,SAAiBD,GACfjB,EAASmB,SAAQ,SAACC,UAAeA,EAAWH,MAetCI,CAAQJ,IACD,IAGRlB,IAMF,SAASuB,EAASf,EAASgB,GAChC,IAAMC,EAAU9B,EAAAA,QAAM+B,WAAWhC,GACjC,IAAK+B,EAAQlB,UAAW,MAAM,IAAIoB,MAAM,+IAExChC,EAAK,QAACiC,WACJ,WAAMH,OAAAA,EAAQlB,UAAUC,KACxB,CAACiB,EAAQlB,UAAWC,GAASqB,OAAOL,IAIzB,IAAAM,EAAA,CACbpC,aAAAA,EACAI,cAAAA,EACAyB,SAAAA"}
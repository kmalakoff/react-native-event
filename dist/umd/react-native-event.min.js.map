{"version":3,"file":"react-native-event.min.js","sources":["../../src/index.tsx"],"sourcesContent":["import { useState, useEffect, useContext, createContext, createElement } from 'react';\nimport type { ReactNode } from 'react';\nimport { View, StyleSheet } from 'react-native';\nimport type { GestureResponderEvent } from 'react-native';\n\nexport type EventTypes = GestureResponderEvent;\nexport type HandlerType = (event: EventTypes) => void;\n\nexport type EventContextType = {\n  subscribe: (handler: HandlerType) => void;\n};\n\nexport const EventContext = createContext<EventContextType | undefined>(undefined);\n\nexport type EventProviderProps = {\n  events?: string[];\n  children?: ReactNode;\n};\nexport function EventProvider({ children }: EventProviderProps) {\n  const state = useState<HandlerType[]>([]);\n  const handlers = state[0];\n\n  function onEvent(event: EventTypes) {\n    handlers.forEach((subscriber) => subscriber(event));\n  }\n  function subscribe(handler: HandlerType) {\n    handlers.push(handler);\n    return () => handlers.splice(handlers.indexOf(handler), 1);\n  }\n\n  //   <EventContext.Provider value={{ subscribe }}>\n  //   <View\n  //     style={StyleSheet.absoluteFill}\n  //     onStartShouldSetResponderCapture={(\n  //       event: GestureResponderEvent,\n  //     ) => {\n  //       event.persist();\n  //       onEvent(event);\n  //       return false;\n  //     }}\n  //   >\n  //     {children}\n  //   </View>\n  // </EventContext.Provider>\n\n  return createElement(\n    EventContext.Provider,\n    { value: { subscribe } },\n    createElement(\n      View,\n      {\n        style: StyleSheet.absoluteFill,\n        onStartShouldSetResponderCapture: (event) => {\n          event.persist();\n          onEvent(event);\n          return false;\n        },\n      },\n      children,\n    ),\n  );\n}\n\nexport function useEvent(handler, dependencies) {\n  const context = useContext(EventContext);\n  if (!context) {\n    throw new Error('react-native-event: subscribe not found on context. You might be missing the EventProvider or have multiple instances of react-native-event');\n  }\n\n  useEffect(() => context.subscribe(handler), [context.subscribe, handler].concat(dependencies));\n}\n"],"names":["EventContext","createContext","undefined","param","children","handlers","useState","createElement","Provider","value","subscribe","handler","push","splice","indexOf","View","style","StyleSheet","absoluteFill","onStartShouldSetResponderCapture","event","persist","forEach","subscriber","onEvent","dependencies","context","useContext","Error","useEffect","concat"],"mappings":"sVAYaA,EAAeC,EAAaA,mBAA+BC,oCAMjE,SAAuBC,GAAA,IAAEC,EAAFD,EAAEC,SAExBC,EADQC,WAAwB,IACf,GAyBvB,OAAOC,EAAaA,cAClBP,EAAaQ,SACb,CAAEC,MAAO,CAAEC,UAtBb,SAAmBC,GAEjB,OADAN,EAASO,KAAKD,GACP,kBAAMN,EAASQ,OAAOR,EAASS,QAAQH,GAAU,GACzD,IAoBCJ,EAAAA,cACEQ,EAAAA,KACA,CACEC,MAAOC,EAAUA,WAACC,aAClBC,iCAAkC,SAACC,GAGjC,OAFAA,EAAMC,UA/Bd,SAAiBD,GACff,EAASiB,SAAQ,SAACC,UAAeA,EAAWH,EAAM,GACnD,CA8BOI,CAAQJ,IACD,CACR,GAEHhB,GAGL,aAEM,SAAkBO,EAASc,GAChC,IAAMC,EAAUC,aAAW3B,GAC3B,IAAK0B,EACH,MAAM,IAAIE,MAAM,+IAGlBC,EAAAA,WAAU,WAAMH,OAAAA,EAAQhB,UAAUC,KAAU,CAACe,EAAQhB,UAAWC,GAASmB,OAAOL,GACjF"}